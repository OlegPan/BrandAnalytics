<?xml version="1.0" encoding="UTF-8"?>
<project name="BrandAnalytic" default="all" basedir=".">

    <!--main paths-->
    <property name="project.dir" location="."/>
    <property name="lib.dir" location="${project.dir}/lib"/>
    <property name="build.dir" location="${project.dir}/build"/>
    <property name="classes.dir" location="${build.dir}/classes"/>
    <property name="dist.dir" location="${build.dir}/dist"/>

    <!--modules build.xml-->
    <property name="core.build" location="${project.dir}/core/build.xml"/>
    <property name="miner.build" location="${project.dir}/miner/build.xml"/>
    <property name="indexer.build" location="${project.dir}/indexer/build.xml"/>
    <property name="frontend.build" location="${project.dir}/frontend/build.xml"/>
    <property name="searcher.build" location="${project.dir}/searcher/build.xml"/>

    <!-- classpath -->
    <path id="libs">
        <fileset dir="lib" includes="**/*.jar"/>
        <fileset dir="${classes.dir}" includes="**/*.class"/>
    </path>

    <!--initialization-->
    <target name="init">
        <mkdir dir="${build.dir}"/>
        <mkdir dir="${classes.dir}"/>
        <mkdir dir="${dist.dir}"/>

    </target>

    <target name="core" depends="init">
        <ant antfile="${core.build}"/>
    </target>

    <target name="indexer" depends="core">
        <ant antfile="${indexer.build}"/>
    </target>

    <target name="searcher" depends="indexer">
        <ant antfile="${searcher.build}"/>
    </target>

    <target name="frontend" depends="searcher">
        <ant antfile="${frontend.build}"/>
    </target>

    <target name="miner" depends="core">
        <ant antfile="${miner.build}"/>
    </target>

    <target name="all" depends="init">
        <antcall target="core"/>
        <antcall target="indexer"/>
        <antcall target="frontend"/>
        <antcall target="miner"/>
        <antcall target="searcher"/>
    </target>

    <target name="indexer_run" depends="indexer">
        <ant antfile="${indexer.build}" target="run"/>
    </target>

    <target name="frontend_run" depends="frontend">
        <ant antfile="${frontend.build}" target="run"/>
    </target>

    <target name="miner_run" depends="miner">
        <ant antfile="${miner.build}" target="run"/>
    </target>

</project>

